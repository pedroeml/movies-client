function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"0n2z":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("fXoL"),r=i("tk/3"),o=i("jQ2G"),c=function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.http=t,this.config=i}return _createClass(e,[{key:"getMovies",value:function(){return this.http.get(this.config.getMoviesApiUrl())}},{key:"getMovie",value:function(e){return this.http.get("".concat(this.config.getMoviesApiUrl(),"/").concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Wb(r.b),n.Wb(o.a))},e.\u0275prov=n.Jb({token:e,factory:e.\u0275fac}),e}()},MIah:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n,r=i("LRne"),o=i("cp0P"),c=i("lJxs"),a=i("JIr8"),s=i("5+tZ"),u=i("pjpR"),f=function(e){return e.HORROR="Horror",e.COMEDY="Comedy",e.ACTION="Action",e.FANTASY="Fantasy",e.SCIFI="Sci-Fi",e}({}),l=function e(t){_classCallCheck(this,e),this.id=t.id,this.name=t.name,this.genre=t.genre,this.release=t.release,this.videoUrl=t.videoUrl},v=i("fXoL"),h=i("bN/h"),p=i("0n2z"),d=((n=function(){function e(t,i){_classCallCheck(this,e),this.profileService=t,this.restService=i,this.genres=[f.ACTION,f.COMEDY,f.FANTASY,f.HORROR,f.SCIFI]}return _createClass(e,[{key:"getMovies",value:function(){return this.restService.getMovies().pipe(Object(c.a)((function(e){return e.map((function(e){return new l(e)}))})),Object(a.a)((function(){return Object(r.a)([])})))}},{key:"getMovie",value:function(e){return this.restService.getMovie(e).pipe(Object(c.a)((function(e){return new l(e)})),Object(a.a)((function(){return Object(r.a)(void 0)})))}},{key:"filterMoviesByGenre",value:function(e,t){return e.filter((function(e){return e.genre===t}))}},{key:"mapMoviesByGenre",value:function(e){var t=this;return this.movieGenres.map((function(i){return t.filterMoviesByGenre(e,i)}))}},{key:"loadWatchedMovies",value:function(e,t){var i=this,n=e.watchedMovies.map((function(e){return e.id}));return t&&t>0&&(n.length=t),Object(r.a)(n).pipe(Object(c.a)((function(e){return e.map((function(e){return i.getMovie(e)}))})),Object(s.a)((function(e){return Object(o.a)(e)})))}},{key:"updateWatchedMovie",value:function(e,t){var i={watchedMovies:t.watchedMovies};return this.incrementViews(e,t),this.profileService.update(t.id,i)}},{key:"incrementViews",value:function(e,t){var i=t.watchedMovies.findIndex((function(t){return t.id===e.id})),n=-1!==i?t.watchedMovies.splice(i,1)[0].views+1:1,r=new u.a({id:e.id,views:n});t.watchedMovies.unshift(r)}},{key:"movieGenres",get:function(){return this.genres}}]),e}()).\u0275fac=function(e){return new(e||n)(v.Wb(h.a),v.Wb(p.a))},n.\u0275prov=v.Jb({token:n,factory:n.\u0275fac}),n)},ubTF:function(e,t,i){"use strict";i.r(t),i.d(t,"MovieModule",(function(){return C}));var n=i("ofXK"),r=i("Xa2L"),o=i("WSrY"),c=i("cRhG"),a=i("tyNb"),s=i("eIep"),u=i("lJxs"),f=i("vkgz"),l=i("SxV6"),v=i("fXoL"),h=i("jhN1"),p=i("bN/h"),d=i("MIah");function b(e,t){1&e&&v.Ob(0,"mat-spinner",2),2&e&&v.ic("diameter",100)}function m(e,t){if(1&e&&(v.Sb(0,"div"),v.Sb(1,"div",3),v.Ob(2,"iframe",4),v.Rb(),v.Sb(3,"h2",5),v.wc(4),v.Rb(),v.Sb(5,"h4",5),v.wc(6),v.Rb(),v.Rb()),2&e){var i=v.dc();v.Bb(2),v.ic("src",i.movieUrl,v.pc),v.Bb(2),v.xc(i.movie.name),v.Bb(2),v.zc("",i.movie.release," - ",i.movie.genre,"")}}var g,y,M,w=[{path:":id",component:(g=function(){function e(t,i,n,r,o){_classCallCheck(this,e),this.route=t,this.router=i,this.sanitizer=n,this.profileService=r,this.service=o,this.load().subscribe()}return _createClass(e,[{key:"load",value:function(){var e=this;return this.captureMovieId().pipe(Object(s.a)((function(t){return e.loadMovie(t)})),Object(s.a)((function(){return e.loadUser()})),Object(s.a)((function(t){return e.updateWatchedMovie(e.movie,t)})),Object(u.a)((function(){})))}},{key:"loadUser",value:function(){var e=this;return this.profileService.load().pipe(Object(f.a)((function(t){e.user=t})))}},{key:"loadMovie",value:function(e){var t=this;return this.service.getMovie(e).pipe(Object(f.a)((function(e){t.movie=e,e||t.router.navigateByUrl("/home")})))}},{key:"captureMovieId",value:function(){return this.route.params.pipe(Object(l.a)(),Object(u.a)((function(e){return e.id||""})))}},{key:"updateWatchedMovie",value:function(e,t){var i=this;return this.service.updateWatchedMovie(e,t).pipe(Object(f.a)((function(e){i.user=e})))}},{key:"isLoading",get:function(){return!this.user||!this.movie}},{key:"movieUrl",get:function(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.movie.videoUrl)}}]),e}(),g.\u0275fac=function(e){return new(e||g)(v.Nb(a.a),v.Nb(a.b),v.Nb(h.b),v.Nb(p.a),v.Nb(d.a))},g.\u0275cmp=v.Hb({type:g,selectors:[["app-movie-player"]],decls:2,vars:2,consts:[["matSuffix","","class","page-spinner",3,"diameter",4,"ngIf"],[4,"ngIf"],["matSuffix","",1,"page-spinner",3,"diameter"],[1,"video-container"],["type","text/html","frameborder","0","allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture","allowfullscreen","",3,"src"],[1,"min-padding"]],template:function(e,t){1&e&&(v.vc(0,b,1,1,"mat-spinner",0),v.vc(1,m,7,4,"div",1)),2&e&&(v.ic("ngIf",t.isLoading),v.Bb(1),v.ic("ngIf",!t.isLoading))},directives:[n.k,r.b],styles:["[_nghost-%COMP%]{max-width:100%;display:flex;overflow:auto;flex-flow:column}div.video-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0}div.video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}"]}),g)},{path:"",redirectTo:"/home",pathMatch:"full"}],O=((y=function e(){_classCallCheck(this,e)}).\u0275mod=v.Lb({type:y}),y.\u0275inj=v.Kb({factory:function(e){return new(e||y)},imports:[[a.f.forChild(w)],a.f]}),y),k=i("0n2z"),C=((M=function e(){_classCallCheck(this,e)}).\u0275mod=v.Lb({type:M}),M.\u0275inj=v.Kb({factory:function(e){return new(e||M)},providers:[d.a,k.a],imports:[[n.c,o.a,r.a,O,c.ProfileModule]]}),M)}}]);