function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"ct+p":function(e,t,i){"use strict";i.r(t),i.d(t,"HomeModule",(function(){return L}));var n,o=i("ofXK"),r=i("Xa2L"),c=i("ubTF"),a=i("cRhG"),s=i("tyNb"),l=i("vkgz"),u=i("eIep"),f=i("fXoL"),v=i("SxV6"),p=i("lJxs"),h=i("bN/h"),m=i("MIah"),b=((n=function(){function e(t,i){_classCallCheck(this,e),this.profileService=t,this.movieService=i}return _createClass(e,[{key:"loadUser",value:function(){return this.profileService.load().pipe(Object(v.a)())}},{key:"loadMovies",value:function(){var e=this;return this.movieService.getMovies().pipe(Object(p.a)((function(t){return e.movieService.mapMoviesByGenre(t)})))}},{key:"loadWatchedMovies",value:function(e,t){return this.movieService.loadWatchedMovies(e,t)}}]),e}()).\u0275fac=function(e){return new(e||n)(f.Vb(h.a),f.Vb(m.a))},n.\u0275prov=f.Ib({token:n,factory:n.\u0275fac}),n),d=i("jhN1"),g=function(e){return["/player",e]};function w(e,t){if(1&e&&(f.Rb(0,"li",1),f.Nb(1,"img",2),f.Rb(2,"h4"),f.uc(3),f.Qb(),f.Qb()),2&e){var i=t.$implicit,n=f.cc();f.hc("routerLink",f.jc(3,g,i.id)),f.Bb(1),f.hc("src",n.getMovieImageUrl(i),f.oc),f.Bb(2),f.vc(i.name)}}var y,M=((y=function(){function e(t){_classCallCheck(this,e),this.sanitizer=t}return _createClass(e,[{key:"getMovieImageUrl",value:function(e){var t=e.videoUrl.replace("www","img").replace("embed","vi")+"/0.jpg";return this.sanitizer.bypassSecurityTrustResourceUrl(t)}},{key:"movieGenre",get:function(){return this.title||this.movies.find((function(e){return!!e.genre})).genre}}]),e}()).\u0275fac=function(e){return new(e||y)(f.Mb(d.b))},y.\u0275cmp=f.Gb({type:y,selectors:[["app-movie-row"]],inputs:{movies:"movies",title:"title"},decls:4,vars:2,consts:[["routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",3,"routerLink"],[3,"src"]],template:function(e,t){1&e&&(f.Rb(0,"h2"),f.uc(1),f.Qb(),f.Rb(2,"ul"),f.tc(3,w,4,5,"li",0),f.Qb()),2&e&&(f.Bb(1),f.vc(t.movieGenre),f.Bb(2),f.hc("ngForOf",t.movies))},directives:[o.j,s.d,s.c],styles:["h2[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:2%;margin-bottom:1%}img[_ngcontent-%COMP%]{width:180px;height:auto}ul[_ngcontent-%COMP%]{width:auto;display:flex;flex-flow:row;overflow:auto;white-space:nowrap;list-style:none;padding-left:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:180px;margin-right:10px;white-space:normal;display:inline-block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:rgba(63,81,181,.18);cursor:pointer}"]}),y);function k(e,t){if(1&e&&(f.Rb(0,"h1"),f.uc(1),f.Qb()),2&e){var i=f.cc();f.Bb(1),f.wc("Welcome back, ",i.userName,"!")}}function C(e,t){1&e&&f.Nb(0,"mat-spinner",5),2&e&&f.hc("diameter",100)}function _(e,t){if(1&e&&f.Nb(0,"app-movie-row",6),2&e){var i=f.cc();f.hc("title","Continue watching")("movies",i.watchedMovies)}}function O(e,t){if(1&e&&(f.Rb(0,"li"),f.Nb(1,"app-movie-row",7),f.Qb()),2&e){var i=t.$implicit;f.Bb(1),f.hc("movies",i)}}var P,j,B,x=[{path:"",component:(P=function(){function e(t){_classCallCheck(this,e),this.service=t,this.loadUser(),this.loadMovies(),this.limit=5}return _createClass(e,[{key:"loadUser",value:function(){var e=this;this.service.loadUser().pipe(Object(l.a)((function(t){e.user=t})),Object(u.a)((function(t){return e.service.loadWatchedMovies(t,e.limit)}))).subscribe((function(t){e.watchedMovies=t}))}},{key:"loadMovies",value:function(){var e=this;this.service.loadMovies().subscribe((function(t){e.moviesByGenre=t}))}},{key:"userName",get:function(){return this.user?"".concat(this.user.firstName," ").concat(this.user.lastName):""}},{key:"isLoading",get:function(){return!this.user||!this.moviesByGenre||!this.watchedMovies}}]),e}(),P.\u0275fac=function(e){return new(e||P)(f.Mb(b))},P.\u0275cmp=f.Gb({type:P,selectors:[["app-welcome"]],decls:5,vars:4,consts:[[4,"ngIf"],["matSuffix","","matTooltip","Loading...",3,"diameter",4,"ngIf"],["class","min-padding",3,"title","movies",4,"ngIf"],[1,"min-padding"],[4,"ngFor","ngForOf"],["matSuffix","","matTooltip","Loading...",3,"diameter"],[1,"min-padding",3,"title","movies"],[3,"movies"]],template:function(e,t){1&e&&(f.tc(0,k,2,1,"h1",0),f.tc(1,C,1,1,"mat-spinner",1),f.tc(2,_,1,2,"app-movie-row",2),f.Rb(3,"ul",3),f.tc(4,O,2,1,"li",4),f.Qb()),2&e&&(f.hc("ngIf",!!t.user),f.Bb(1),f.hc("ngIf",t.isLoading),f.Bb(1),f.hc("ngIf",t.watchedMovies),f.Bb(2),f.hc("ngForOf",t.moviesByGenre))},directives:[o.k,o.j,r.b,M],styles:["[_nghost-%COMP%]{display:flex;overflow:auto;flex-flow:column;justify-content:space-around}h1[_ngcontent-%COMP%]{align-self:center;margin-top:2%}ul[_ngcontent-%COMP%]{list-style:none}mat-spinner[_ngcontent-%COMP%]{margin:30% auto 70%}"]}),P)}],I=((B=function e(){_classCallCheck(this,e)}).\u0275mod=f.Kb({type:B}),B.\u0275inj=f.Jb({factory:function(e){return new(e||B)},imports:[[s.f.forChild(x)],s.f]}),B),L=((j=function e(){_classCallCheck(this,e)}).\u0275mod=f.Kb({type:j}),j.\u0275inj=f.Jb({factory:function(e){return new(e||j)},providers:[b],imports:[[o.c,I,r.a,c.MovieModule,a.ProfileModule]]}),j)}}]);