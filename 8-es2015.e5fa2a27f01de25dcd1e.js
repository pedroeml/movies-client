(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"ct+p":function(e,i,t){"use strict";t.r(i),t.d(i,"HomeModule",(function(){return B}));var n=t("ofXK"),o=t("Xa2L"),r=t("ubTF"),s=t("cRhG"),c=t("tyNb"),a=t("vkgz"),l=t("eIep"),u=t("fXoL"),p=t("SxV6"),v=t("lJxs"),m=t("bN/h"),d=t("MIah");let f=(()=>{class e{constructor(e,i){this.profileService=e,this.movieService=i}loadUser(){return this.profileService.load().pipe(Object(p.a)())}loadMovies(){return this.movieService.getMovies().pipe(Object(v.a)(e=>this.movieService.mapMoviesByGenre(e)))}loadWatchedMovies(e,i){return this.movieService.loadWatchedMovies(e,i)}}return e.\u0275fac=function(i){return new(i||e)(u.Wb(m.a),u.Wb(d.a))},e.\u0275prov=u.Jb({token:e,factory:e.\u0275fac}),e})();var b=t("jhN1");const h=function(e){return["/player",e]};function g(e,i){if(1&e&&(u.Sb(0,"li",1),u.Ob(1,"img",2),u.Sb(2,"h4"),u.wc(3),u.Rb(),u.Rb()),2&e){const e=i.$implicit,t=u.dc();u.ic("routerLink",u.kc(3,h,e.id)),u.Bb(1),u.ic("src",t.getMovieImageUrl(e),u.qc),u.Bb(2),u.xc(e.name)}}let w=(()=>{class e{constructor(e){this.sanitizer=e}get movieGenre(){return this.title||this.movies.find(e=>!!e.genre).genre}getMovieImageUrl(e){const i=e.videoUrl.replace("www","img").replace("embed","vi")+"/0.jpg";return this.sanitizer.bypassSecurityTrustResourceUrl(i)}}return e.\u0275fac=function(i){return new(i||e)(u.Nb(b.b))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-movie-row"]],inputs:{movies:"movies",title:"title"},decls:4,vars:2,consts:[["routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",3,"routerLink"],[3,"src"]],template:function(e,i){1&e&&(u.Sb(0,"h2"),u.wc(1),u.Rb(),u.Sb(2,"ul"),u.vc(3,g,4,5,"li",0),u.Rb()),2&e&&(u.Bb(1),u.xc(i.movieGenre),u.Bb(2),u.ic("ngForOf",i.movies))},directives:[n.j,c.d,c.c],styles:["h2[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:2%;margin-bottom:1%}img[_ngcontent-%COMP%]{width:180px;height:auto}ul[_ngcontent-%COMP%]{width:auto;display:flex;flex-flow:row;overflow:auto;white-space:nowrap;list-style:none;padding-left:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:180px;margin-right:10px;white-space:normal;display:inline-block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:rgba(63,81,181,.18);cursor:pointer}"]}),e})();function M(e,i){if(1&e&&(u.Sb(0,"h1"),u.wc(1),u.Rb()),2&e){const e=u.dc();u.Bb(1),u.yc("Welcome back, ",e.userName,"!")}}function y(e,i){1&e&&u.Ob(0,"mat-spinner",5),2&e&&u.ic("diameter",100)}function O(e,i){if(1&e&&u.Ob(0,"app-movie-row",6),2&e){const e=u.dc();u.ic("title","Continue watching")("movies",e.watchedMovies)}}function S(e,i){if(1&e&&(u.Sb(0,"li"),u.Ob(1,"app-movie-row",7),u.Rb()),2&e){const e=i.$implicit;u.Bb(1),u.ic("movies",e)}}const k=[{path:"",component:(()=>{class e{constructor(e){this.service=e,this.loadUser(),this.loadMovies(),this.limit=5}get userName(){return this.user?`${this.user.firstName} ${this.user.lastName}`:""}get isLoading(){return!this.user||!this.moviesByGenre||!this.watchedMovies}loadUser(){this.service.loadUser().pipe(Object(a.a)(e=>{this.user=e}),Object(l.a)(e=>this.service.loadWatchedMovies(e,this.limit))).subscribe(e=>{this.watchedMovies=e})}loadMovies(){this.service.loadMovies().subscribe(e=>{this.moviesByGenre=e})}}return e.\u0275fac=function(i){return new(i||e)(u.Nb(f))},e.\u0275cmp=u.Hb({type:e,selectors:[["app-welcome"]],decls:5,vars:4,consts:[[4,"ngIf"],["matSuffix","","class","page-spinner",3,"diameter",4,"ngIf"],["class","min-padding",3,"title","movies",4,"ngIf"],[1,"min-padding"],[4,"ngFor","ngForOf"],["matSuffix","",1,"page-spinner",3,"diameter"],[1,"min-padding",3,"title","movies"],[3,"movies"]],template:function(e,i){1&e&&(u.vc(0,M,2,1,"h1",0),u.vc(1,y,1,1,"mat-spinner",1),u.vc(2,O,1,2,"app-movie-row",2),u.Sb(3,"ul",3),u.vc(4,S,2,1,"li",4),u.Rb()),2&e&&(u.ic("ngIf",!!i.user),u.Bb(1),u.ic("ngIf",i.isLoading),u.Bb(1),u.ic("ngIf",i.watchedMovies),u.Bb(2),u.ic("ngForOf",i.moviesByGenre))},directives:[n.k,n.j,o.b,w],styles:["[_nghost-%COMP%]{display:flex;overflow:auto;flex-flow:column;justify-content:space-around}h1[_ngcontent-%COMP%]{align-self:center;margin-top:2%}ul[_ngcontent-%COMP%]{list-style:none}"]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(i){return new(i||e)},imports:[[c.f.forChild(k)],c.f]}),e})(),B=(()=>{class e{}return e.\u0275mod=u.Lb({type:e}),e.\u0275inj=u.Kb({factory:function(i){return new(i||e)},providers:[f],imports:[[n.c,x,o.a,r.MovieModule,s.ProfileModule]]}),e})()}}]);