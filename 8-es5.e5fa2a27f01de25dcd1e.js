function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,i,t){return i&&_defineProperties(e.prototype,i),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"ct+p":function(e,i,t){"use strict";t.r(i),t.d(i,"HomeModule",(function(){return L}));var n,o=t("ofXK"),r=t("Xa2L"),c=t("ubTF"),s=t("cRhG"),a=t("tyNb"),l=t("vkgz"),u=t("eIep"),f=t("fXoL"),v=t("SxV6"),p=t("lJxs"),m=t("bN/h"),h=t("MIah"),d=((n=function(){function e(i,t){_classCallCheck(this,e),this.profileService=i,this.movieService=t}return _createClass(e,[{key:"loadUser",value:function(){return this.profileService.load().pipe(Object(v.a)())}},{key:"loadMovies",value:function(){var e=this;return this.movieService.getMovies().pipe(Object(p.a)((function(i){return e.movieService.mapMoviesByGenre(i)})))}},{key:"loadWatchedMovies",value:function(e,i){return this.movieService.loadWatchedMovies(e,i)}}]),e}()).\u0275fac=function(e){return new(e||n)(f.Wb(m.a),f.Wb(h.a))},n.\u0275prov=f.Jb({token:n,factory:n.\u0275fac}),n),b=t("jhN1"),g=function(e){return["/player",e]};function w(e,i){if(1&e&&(f.Sb(0,"li",1),f.Ob(1,"img",2),f.Sb(2,"h4"),f.wc(3),f.Rb(),f.Rb()),2&e){var t=i.$implicit,n=f.dc();f.ic("routerLink",f.kc(3,g,t.id)),f.Bb(1),f.ic("src",n.getMovieImageUrl(t),f.qc),f.Bb(2),f.xc(t.name)}}var y,k=((y=function(){function e(i){_classCallCheck(this,e),this.sanitizer=i}return _createClass(e,[{key:"getMovieImageUrl",value:function(e){var i=e.videoUrl.replace("www","img").replace("embed","vi")+"/0.jpg";return this.sanitizer.bypassSecurityTrustResourceUrl(i)}},{key:"movieGenre",get:function(){return this.title||this.movies.find((function(e){return!!e.genre})).genre}}]),e}()).\u0275fac=function(e){return new(e||y)(f.Nb(b.b))},y.\u0275cmp=f.Hb({type:y,selectors:[["app-movie-row"]],inputs:{movies:"movies",title:"title"},decls:4,vars:2,consts:[["routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",3,"routerLink"],[3,"src"]],template:function(e,i){1&e&&(f.Sb(0,"h2"),f.wc(1),f.Rb(),f.Sb(2,"ul"),f.vc(3,w,4,5,"li",0),f.Rb()),2&e&&(f.Bb(1),f.xc(i.movieGenre),f.Bb(2),f.ic("ngForOf",i.movies))},directives:[o.j,a.d,a.c],styles:["h2[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:2%;margin-bottom:1%}img[_ngcontent-%COMP%]{width:180px;height:auto}ul[_ngcontent-%COMP%]{width:auto;display:flex;flex-flow:row;overflow:auto;white-space:nowrap;list-style:none;padding-left:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:180px;margin-right:10px;white-space:normal;display:inline-block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:rgba(63,81,181,.18);cursor:pointer}"]}),y);function M(e,i){if(1&e&&(f.Sb(0,"h1"),f.wc(1),f.Rb()),2&e){var t=f.dc();f.Bb(1),f.yc("Welcome back, ",t.userName,"!")}}function C(e,i){1&e&&f.Ob(0,"mat-spinner",5),2&e&&f.ic("diameter",100)}function O(e,i){if(1&e&&f.Ob(0,"app-movie-row",6),2&e){var t=f.dc();f.ic("title","Continue watching")("movies",t.watchedMovies)}}function _(e,i){if(1&e&&(f.Sb(0,"li"),f.Ob(1,"app-movie-row",7),f.Rb()),2&e){var t=i.$implicit;f.Bb(1),f.ic("movies",t)}}var S,P,x,B=[{path:"",component:(S=function(){function e(i){_classCallCheck(this,e),this.service=i,this.loadUser(),this.loadMovies(),this.limit=5}return _createClass(e,[{key:"loadUser",value:function(){var e=this;this.service.loadUser().pipe(Object(l.a)((function(i){e.user=i})),Object(u.a)((function(i){return e.service.loadWatchedMovies(i,e.limit)}))).subscribe((function(i){e.watchedMovies=i}))}},{key:"loadMovies",value:function(){var e=this;this.service.loadMovies().subscribe((function(i){e.moviesByGenre=i}))}},{key:"userName",get:function(){return this.user?"".concat(this.user.firstName," ").concat(this.user.lastName):""}},{key:"isLoading",get:function(){return!this.user||!this.moviesByGenre||!this.watchedMovies}}]),e}(),S.\u0275fac=function(e){return new(e||S)(f.Nb(d))},S.\u0275cmp=f.Hb({type:S,selectors:[["app-welcome"]],decls:5,vars:4,consts:[[4,"ngIf"],["matSuffix","","class","page-spinner",3,"diameter",4,"ngIf"],["class","min-padding",3,"title","movies",4,"ngIf"],[1,"min-padding"],[4,"ngFor","ngForOf"],["matSuffix","",1,"page-spinner",3,"diameter"],[1,"min-padding",3,"title","movies"],[3,"movies"]],template:function(e,i){1&e&&(f.vc(0,M,2,1,"h1",0),f.vc(1,C,1,1,"mat-spinner",1),f.vc(2,O,1,2,"app-movie-row",2),f.Sb(3,"ul",3),f.vc(4,_,2,1,"li",4),f.Rb()),2&e&&(f.ic("ngIf",!!i.user),f.Bb(1),f.ic("ngIf",i.isLoading),f.Bb(1),f.ic("ngIf",i.watchedMovies),f.Bb(2),f.ic("ngForOf",i.moviesByGenre))},directives:[o.k,o.j,r.b,k],styles:["[_nghost-%COMP%]{display:flex;overflow:auto;flex-flow:column;justify-content:space-around}h1[_ngcontent-%COMP%]{align-self:center;margin-top:2%}ul[_ngcontent-%COMP%]{list-style:none}"]}),S)}],j=((x=function e(){_classCallCheck(this,e)}).\u0275mod=f.Lb({type:x}),x.\u0275inj=f.Kb({factory:function(e){return new(e||x)},imports:[[a.f.forChild(B)],a.f]}),x),L=((P=function e(){_classCallCheck(this,e)}).\u0275mod=f.Lb({type:P}),P.\u0275inj=f.Kb({factory:function(e){return new(e||P)},providers:[d],imports:[[o.c,j,r.a,c.MovieModule,s.ProfileModule]]}),P)}}]);