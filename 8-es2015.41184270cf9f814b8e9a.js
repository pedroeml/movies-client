(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"ct+p":function(e,t,i){"use strict";i.r(t),i.d(t,"HomeModule",(function(){return j}));var o=i("ofXK"),n=i("Xa2L"),r=i("ubTF"),s=i("cRhG"),c=i("tyNb"),a=i("vkgz"),l=i("eIep"),u=i("fXoL"),m=i("SxV6"),p=i("lJxs"),h=i("bN/h"),v=i("MIah");let f=(()=>{class e{constructor(e,t){this.profileService=e,this.movieService=t}loadUser(){return this.profileService.load().pipe(Object(m.a)())}loadMovies(){return this.movieService.getMovies().pipe(Object(p.a)(e=>this.movieService.mapMoviesByGenre(e)))}loadWatchedMovies(e,t){return this.movieService.loadWatchedMovies(e,t)}}return e.\u0275fac=function(t){return new(t||e)(u.Vb(h.a),u.Vb(v.a))},e.\u0275prov=u.Ib({token:e,factory:e.\u0275fac}),e})();var d=i("jhN1");const b=function(e){return["/player",e]};function g(e,t){if(1&e&&(u.Rb(0,"li",1),u.Nb(1,"img",2),u.Rb(2,"h4"),u.uc(3),u.Qb(),u.Qb()),2&e){const e=t.$implicit,i=u.cc();u.hc("routerLink",u.jc(3,b,e.id)),u.Bb(1),u.hc("src",i.getMovieImageUrl(e),u.oc),u.Bb(2),u.vc(e.name)}}let w=(()=>{class e{constructor(e){this.sanitizer=e}get movieGenre(){return this.title||this.movies.find(e=>!!e.genre).genre}getMovieImageUrl(e){const t=e.videoUrl.replace("www","img").replace("embed","vi")+"/0.jpg";return this.sanitizer.bypassSecurityTrustResourceUrl(t)}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(d.b))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-movie-row"]],inputs:{movies:"movies",title:"title"},decls:4,vars:2,consts:[["routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",3,"routerLink"],[3,"src"]],template:function(e,t){1&e&&(u.Rb(0,"h2"),u.uc(1),u.Qb(),u.Rb(2,"ul"),u.tc(3,g,4,5,"li",0),u.Qb()),2&e&&(u.Bb(1),u.vc(t.movieGenre),u.Bb(2),u.hc("ngForOf",t.movies))},directives:[o.j,c.d,c.c],styles:["h2[_ngcontent-%COMP%]{text-transform:uppercase;margin-top:2%;margin-bottom:1%}img[_ngcontent-%COMP%]{width:180px;height:auto}ul[_ngcontent-%COMP%]{width:auto;display:flex;flex-flow:row;overflow:auto;white-space:nowrap;list-style:none;padding-left:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:180px;margin-right:10px;white-space:normal;display:inline-block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:rgba(63,81,181,.18);cursor:pointer}"]}),e})();function M(e,t){if(1&e&&(u.Rb(0,"h1"),u.uc(1),u.Qb()),2&e){const e=u.cc();u.Bb(1),u.wc("Welcome back, ",e.userName,"!")}}function y(e,t){1&e&&u.Nb(0,"mat-spinner",5),2&e&&u.hc("diameter",100)}function O(e,t){if(1&e&&u.Nb(0,"app-movie-row",6),2&e){const e=u.cc();u.hc("title","Continue watching")("movies",e.watchedMovies)}}function k(e,t){if(1&e&&(u.Rb(0,"li"),u.Nb(1,"app-movie-row",7),u.Qb()),2&e){const e=t.$implicit;u.Bb(1),u.hc("movies",e)}}const B=[{path:"",component:(()=>{class e{constructor(e){this.service=e,this.loadUser(),this.loadMovies(),this.limit=5}get userName(){return this.user?`${this.user.firstName} ${this.user.lastName}`:""}get isLoading(){return!this.user||!this.moviesByGenre||!this.watchedMovies}loadUser(){this.service.loadUser().pipe(Object(a.a)(e=>{this.user=e}),Object(l.a)(e=>this.service.loadWatchedMovies(e,this.limit))).subscribe(e=>{this.watchedMovies=e})}loadMovies(){this.service.loadMovies().subscribe(e=>{this.moviesByGenre=e})}}return e.\u0275fac=function(t){return new(t||e)(u.Mb(f))},e.\u0275cmp=u.Gb({type:e,selectors:[["app-welcome"]],decls:5,vars:4,consts:[[4,"ngIf"],["matSuffix","","matTooltip","Loading...",3,"diameter",4,"ngIf"],["class","min-padding",3,"title","movies",4,"ngIf"],[1,"min-padding"],[4,"ngFor","ngForOf"],["matSuffix","","matTooltip","Loading...",3,"diameter"],[1,"min-padding",3,"title","movies"],[3,"movies"]],template:function(e,t){1&e&&(u.tc(0,M,2,1,"h1",0),u.tc(1,y,1,1,"mat-spinner",1),u.tc(2,O,1,2,"app-movie-row",2),u.Rb(3,"ul",3),u.tc(4,k,2,1,"li",4),u.Qb()),2&e&&(u.hc("ngIf",!!t.user),u.Bb(1),u.hc("ngIf",t.isLoading),u.Bb(1),u.hc("ngIf",t.watchedMovies),u.Bb(2),u.hc("ngForOf",t.moviesByGenre))},directives:[o.k,o.j,n.b,w],styles:["[_nghost-%COMP%]{display:flex;overflow:auto;flex-flow:column;justify-content:space-around}h1[_ngcontent-%COMP%]{align-self:center;margin-top:2%}ul[_ngcontent-%COMP%]{list-style:none}mat-spinner[_ngcontent-%COMP%]{margin:30% auto 70%}"]}),e})()}];let C=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(t){return new(t||e)},imports:[[c.f.forChild(B)],c.f]}),e})(),j=(()=>{class e{}return e.\u0275mod=u.Kb({type:e}),e.\u0275inj=u.Jb({factory:function(t){return new(t||e)},providers:[f],imports:[[o.c,C,n.a,r.MovieModule,s.ProfileModule]]}),e})()}}]);